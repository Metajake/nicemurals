
{% extends 'blog/base.html' %}
{% url 'blog-home' as home %}
{% block extrahead %}
<title>First Studio | Blog</title>{% endblock %}
{% block masthead-headline %}<a href="{{home}}">
  <h1 class="title is-2">First Studio.Co</h1></a><a href="{{home}}">
  <h2 class="subtitle is-6">The Interactive Work of Jacob North</h2></a>
<hr/>{% endblock %}  
{% block masthead-sidebar %}
{% endblock %}
{% block main-content %}
<div class="columns">
  <div class="column is-four-fifths">
    <div class="columns is-multiline">{% for entry in entries reversed %}
      <div class="column is-one-quarter break-tablet">
        <div class="card">{% for work in entry.images.all %}{% if forloop.first %}
          <div class="card-image">
            <div class="figure image is-4by3"><img src="{{ work.image.url }}"/></div>
          </div>{% endif %}{% endfor %}
          <div class="card-content">
            <div class="content"><a href="/entry/{{entry.slug}}">
                <h3 class="title is-4">{{entry.title}} </h3>
                <h4 class="subtitle is-6">{{entry.richbody | safe | truncatewords:7}}</h4></a></div>
          </div>
          <footer class="card-footer">
            <div class="card-footer-item justify-left">
              <p>{{entry.created}}</p>
            </div>
          </footer>
        </div>
      </div>{% endfor %}
    </div>
  </div>
  <div class="column">
    <div class="content">
      <h3>Categories</h3>
      <ul>{% for tag in tags %}
        <li><a href="/tags/{{tag}}">{{tag}}</a></li>{% endfor %}
      </ul>
      {% url 'gain-experience' as gainexperience %}
      {% for entity in game.entities %}
      <div class="card">
        <div class="card-content">
          <div class="content">
            <div class="stat">
              <p>Game Life: <span id="game-life">0</span></p>
            </div>
            <div class="entity" id="entity-{{entity.pk}}">
              <p>{{entity.name}}</p><small>Exp: <span class="exp">{{entity.experience}}</span></small>
            </div>
          </div>
        </div>
      </div>{% endfor %}
      {% block prescript %}
      {{gainexperience|json_script:'gainexpurl'}}
      <script>
        var gainExpUrl = JSON.parse(document.querySelector('#gainexpurl').textContent);
        var csrfToken = '{{csrf_token}}'
        
        function mouseMoveInteraction(){
          if (enableExpHandler) {
            gainExp(gainExpUrl, 1, 1, csrfToken);
            gameLife += 1
            enableExpHandler = false;
          }
        }
        
      </script>{% endblock %}
      {% block postscript%}
      <script>
        /* slider = document.querySelector("#formality-range")
        slider.oninput = function(){
          if(this.value == 100){
            $('.will-pulse-in').addClass('activate');
            $('.will-pulse-in').one("animationend", function(event) {
                console.log("Done")
                $(this).removeClass('activate')
            });
          }
        } */
      </script>{% endblock %}
    </div>
  </div>
</div>{% endblock %}